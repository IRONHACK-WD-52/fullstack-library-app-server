(this["webpackJsonpreact-mongoose"]=this["webpackJsonpreact-mongoose"]||[]).push([[0],{68:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a.n(r),s=a(17),o=a.n(s),l=a(5),i=a(8);a(43);var b=function(){return Object(n.jsxs)("div",{className:"text-center",children:[Object(n.jsx)("p",{children:"This is the homepage"}),Object(n.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(n.jsx)(l.b,{to:"/book/all",children:"See the books"}),Object(n.jsx)(l.b,{className:"btn btn-lg btn-primary",to:"/auth/signup",children:"Signup here!"})]})]})},j=a(4),u=a(6),d=a.n(u),h=a(11),p=a(9),m=a(36),O=a.n(m).a.create({baseURL:"http://localhost:1234/api"}),x=localStorage.getItem("loggedInUser"),v=JSON.parse(x||'""');O.interceptors.request.use((function(e){return e.headers={Authorization:"Bearer ".concat(v.token)},e}));var g=O,f=a(16),k=a(21);var y=function(e){return Object(n.jsxs)("div",{className:"form-group ",children:[Object(n.jsx)("label",{htmlFor:e.id,children:e.label}),Object(n.jsx)("input",{type:e.type,className:"form-control ".concat(e.error?"is-invalid":""),id:e.id,name:e.name,value:e.value,onChange:e.onChange}),e.error?Object(n.jsx)("div",{className:"invalid-feedback",children:e.error}):null]})};var N=function(e){return Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:e.id,children:e.label}),Object(n.jsx)("select",{multiple:e.multiple,className:"form-control",id:e.id,name:e.name,value:e.value,onChange:e.onChange,children:e.options.map((function(e){return Object(n.jsx)("option",{value:e.value?e.value:e,children:e.text?e.text:e},e.value?e.value:e)}))})]})};var w=function(e){return Object(n.jsx)("div",{className:"form-group",children:Object(n.jsxs)("div",{className:"custom-file",children:[Object(n.jsx)("input",{type:"file",className:"custom-file-input",id:e.id,name:e.name,onChange:e.onChange}),Object(n.jsx)("label",{className:"custom-file-label",htmlFor:e.id,children:e.label})]})})},C=["Romance","Poetry","Biography","Horror","Sci-fi","Fantasy"];function S(){var e=(new Date).getFullYear();return Object(k.a)(new Array(e-1900)).map((function(e,t){return t+1+1900}))}var I=function(e){function t(t){if(t.currentTarget.files)return e.setState(Object(j.a)(Object(j.a)({},e.state),{},Object(f.a)({},t.currentTarget.name,t.currentTarget.files[0])));e.setState(Object(j.a)(Object(j.a)({},e.state),{},Object(f.a)({},t.currentTarget.name,t.currentTarget.value)))}return Object(n.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.handleSubmit()},children:[Object(n.jsx)(y,{id:"bookTitle",type:"text",name:"title",label:"Book Title",value:e.state.title,onChange:t}),Object(n.jsx)(y,{id:"bookAuthor",type:"text",name:"author",label:"Book Author",value:e.state.author,onChange:t}),Object(n.jsx)(N,{label:"Release year",id:"bookReleaseYear",name:"year",options:S(),value:e.state.year,onChange:t}),Object(n.jsx)(N,{label:"Book genre",id:"bookGenre",name:"genre",options:C,value:e.state.genre,onChange:t}),Object(n.jsx)(y,{id:"bookPublisher",type:"text",name:"publisher",label:"Book Publisher",value:e.state.publisher,onChange:t}),Object(n.jsx)(w,{id:"bookCoverImage",name:"bookCoverImage",label:"Choose an Image",value:e.state.bookCoverImage,onChange:t}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)(l.b,{className:"btn btn-light mx-2",to:"/book/all",children:"Back"}),Object(n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save"})]})]})};var T=function(e){var t=Object(r.useState)({title:"",author:"",genre:"Romance",publisher:"",year:(new Date).getFullYear(),bookCoverImage:""}),a=Object(p.a)(t,2),c=a[0],s=a[1];function o(e){return l.apply(this,arguments)}function l(){return(l=Object(h.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new FormData).append("bookCoverImage",t),e.next=5,g.post("/file-upload",a);case 5:return n=e.sent,e.abrupt("return",n.data.fileUrl);case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function i(){return(i=Object(h.a)(d.a.mark((function t(){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o(c.bookCoverImage);case 3:return a=t.sent,t.next=6,g.post("/book",Object(j.a)(Object(j.a)({},c),{},{bookCoverImage:a}));case 6:n=t.sent,console.log(n),e.history.push("/book/all"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}return Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"New Book"}),Object(n.jsx)(I,{state:c,setState:s,handleSubmit:function(){return i.apply(this,arguments)}})]})};var B=function(e){var t=Object(r.useState)({title:"",author:"",genre:"Romance",publisher:"",year:(new Date).getFullYear(),bookCoverImage:""}),a=Object(p.a)(t,2),c=a[0],s=a[1],o=e.match.params.id;function l(){return(l=Object(h.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.patch("/book/".concat(o),c);case 3:t.sent,e.history.push("/book/all"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){function e(){return(e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.get("/book/".concat(o));case 3:t=e.sent,s(Object(j.a)({},t.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[o]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"Edit Book Details"}),Object(n.jsx)(I,{state:c,setState:s,handleSubmit:function(){return l.apply(this,arguments)}})]})},F=a.p+"static/media/trashIcon.627a1d5d.svg",A=a.p+"static/media/pencilIcon.0a915164.svg";var D=function(){return Object(n.jsx)("div",{className:"spinner-border",role:"status",children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})})},E=a(18);var P=function(e){return Object(n.jsxs)(E.a,{centered:!0,show:e.show,onHide:e.handleClose,children:[Object(n.jsx)(E.a.Header,{closeButton:!0,children:Object(n.jsx)(E.a.Title,{children:"Please confirm your action"})}),Object(n.jsx)(E.a.Body,{children:Object(n.jsx)("p",{children:"This action is irreversible. Are you sure you want proceed?"})}),Object(n.jsxs)(E.a.Footer,{children:[Object(n.jsx)("button",{className:"btn btn-secondary",onClick:e.handleClose,children:"Cancel"}),Object(n.jsx)(l.b,{className:"btn btn-danger",to:e.action,children:"Confirm"})]})]})};var U=function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(!0),o=Object(p.a)(s,2),b=o[0],j=o[1],u=Object(r.useState)(!1),m=Object(p.a)(u,2),O=m[0],x=m[1],v=Object(r.useState)(""),f=Object(p.a)(v,2),y=f[0],N=f[1],w=Object(i.g)();return Object(r.useEffect)((function(){function e(){return(e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.get("/book");case 3:t=e.sent,console.log(t),c(Object(k.a)(t.data)),j(!1),e.next=17;break;case 9:if(e.prev=9,e.t0=e.catch(0),console.error(e.t0.response),j(!1),404!==e.t0.response.status){e.next=15;break}return e.abrupt("return",w.push("/not-found"));case 15:if(500!==e.t0.response.status){e.next=17;break}return e.abrupt("return",w.push("/internal-server-error"));case 17:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[w]),Object(n.jsxs)("div",{className:"d-flex justify-content-center m-5",children:[b?Object(n.jsx)(D,{}):Object(n.jsxs)("table",{className:"table",children:[Object(n.jsx)("thead",{className:"thead-dark",children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Title"}),Object(n.jsx)("th",{children:"Author"}),Object(n.jsx)("th",{children:"Year"}),Object(n.jsx)("th",{children:"Actions"})]})}),Object(n.jsx)("tbody",{children:a.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e.title}),Object(n.jsx)("td",{children:e.author}),Object(n.jsx)("td",{children:e.year}),Object(n.jsxs)("td",{children:[Object(n.jsx)(l.b,{to:"/book/".concat(e._id),children:"See More"}),Object(n.jsx)("button",{className:"btn btn-danger btn-sm mx-2",onClick:function(){N(e._id),x(!0)},children:Object(n.jsx)("img",{src:F,alt:"trash icon"})}),Object(n.jsx)(l.b,{className:"btn btn-primary btn-sm mx-1",to:"/book/edit/".concat(e._id),children:Object(n.jsx)("img",{src:A,alt:"pencil icon"})})]})]},e._id)}))})]}),Object(n.jsx)(P,{show:O,handleClose:function(){x(!1)},action:"/book/delete/".concat(y)})]})},R=Object(r.createContext)({token:"",user:{}});function L(e){var t=Object(r.useState)({token:"",user:{}}),a=Object(p.a)(t,2),c=a[0],s=a[1];return Object(r.useEffect)((function(){var e=localStorage.getItem("loggedInUser"),t=JSON.parse(e||'""');t.user&&s(Object(j.a)({},t))}),[]),Object(n.jsx)(R.Provider,{value:{loggedInUser:c,setLoggedInUser:s},children:e.children})}var Y=function(e){Object(r.useContext)(R);var t=e.match.params.id,a=Object(r.useState)({title:"",author:"",year:null,genre:"",publisher:""}),c=Object(p.a)(a,2),s=c[0],o=c[1];return Object(r.useEffect)((function(){function e(){return(e=Object(h.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.get("/book/".concat(t));case 3:a=e.sent,console.log(a),o(Object(j.a)({},a.data)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"Book Details"}),s.bookCoverImage?Object(n.jsx)("img",{src:s.bookCoverImage,alt:"book cover"}):Object(n.jsx)("p",{children:"No Book Cover available"}),Object(n.jsxs)("p",{children:[Object(n.jsx)("strong",{children:"Title: "}),s.title]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("strong",{children:"Author: "}),s.author]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("strong",{children:"Release Year: "}),s.year]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("strong",{children:"Genre: "}),s.genre]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("strong",{children:"Publisher: "}),s.publisher]})]})};var J=function(e){var t=e.match.params.id;return Object(r.useEffect)((function(){function a(){return(a=Object(h.a)(d.a.mark((function a(){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,g.delete("/book/".concat(t));case 3:e.history.push("/book/all"),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),console.error(a.t0);case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[t,e.history]),Object(n.jsx)("div",{children:"Deleting..."})};var _=function(){return Object(n.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:[Object(n.jsx)(l.b,{className:"navbar-brand",to:"/",children:"Navbar"}),Object(n.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(n.jsx)("span",{className:"navbar-toggler-icon"})}),Object(n.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavDropdown",children:Object(n.jsxs)("ul",{className:"navbar-nav",children:[Object(n.jsx)("li",{className:"nav-item active",children:Object(n.jsxs)(l.b,{className:"nav-link",to:"/",children:["Home ",Object(n.jsx)("span",{className:"sr-only",children:"(current)"})]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(l.b,{className:"nav-link",to:"/book/all",children:"Book list"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(l.b,{className:"nav-link",to:"/book/create",children:"New Book"})})]})})]})},q=a(37);var G=function(e){var t=e.component,a=Object(q.a)(e,["component"]),c=Object(r.useContext)(R);return Object(n.jsx)(i.b,Object(j.a)(Object(j.a)({},a),{},{render:function(e){return c.loggedInUser.user._id?Object(n.jsx)(t,Object(j.a)(Object(j.a)({},e),a)):Object(n.jsx)(i.a,{to:{pathname:"/auth/login",state:{from:e.location}}})}}))};var H=function(e){return Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(_,{}),Object(n.jsx)("div",{className:"container-fluid",children:Object(n.jsxs)(i.d,{children:[Object(n.jsx)(G,{path:"".concat(e.match.path,"/create"),component:T}),Object(n.jsx)(i.b,{path:"".concat(e.match.path,"/all"),component:U}),Object(n.jsx)(i.b,{exact:!0,path:"".concat(e.match.path,"/delete/:id"),component:J}),Object(n.jsx)(i.b,{exact:!0,path:"".concat(e.match.path,"/edit/:id"),component:B}),Object(n.jsx)(i.b,{path:"".concat(e.match.path,"/:id"),component:Y})]})})]})};var M=function(e){var t=Object(r.useState)({name:"",password:"",email:""}),a=Object(p.a)(t,2),c=a[0],s=a[1],o=Object(r.useState)({name:null,email:null,password:null}),i=Object(p.a)(o,2),b=i[0],u=i[1];function m(e){s(Object(j.a)(Object(j.a)({},c),{},Object(f.a)({},e.currentTarget.name,e.currentTarget.value)))}function O(){return(O=Object(h.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,g.post("/signup",c);case 4:n=t.sent,console.log(n),u({name:"",password:"",email:""}),e.history.push("/auth/login"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.error(t.t0.response),u(Object(j.a)({},t.t0.response.data.errors));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}return Object(n.jsxs)("form",{onSubmit:function(e){return O.apply(this,arguments)},children:[Object(n.jsx)("h1",{children:"Signup!"}),Object(n.jsx)(y,{type:"text",label:"Your Name",name:"name",id:"signupFormName",value:c.name,error:b.name,onChange:m}),Object(n.jsx)(y,{type:"email",label:"E-mail Address",name:"email",id:"signupFormEmail",value:c.email,error:b.email,onChange:m}),Object(n.jsx)(y,{type:"password",label:"Password",name:"password",id:"signupFormPassword",value:c.password,error:b.password,onChange:m}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Signup!"}),Object(n.jsx)(l.b,{to:"/auth/login",children:"Already have an account? Click here to login."})]})]})};var z=function(e){var t=Object(r.useContext)(R);console.log("CONTEXT => ",t);var a=Object(r.useState)({password:"",email:""}),c=Object(p.a)(a,2),s=c[0],o=c[1],i=Object(r.useState)({email:null,password:null}),b=Object(p.a)(i,2),u=b[0],m=b[1];function O(e){o(Object(j.a)(Object(j.a)({},s),{},Object(f.a)({},e.currentTarget.name,e.currentTarget.value)))}function x(){return(x=Object(h.a)(d.a.mark((function a(n){var r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.prev=1,a.next=4,g.post("/login",s);case 4:r=a.sent,console.log(r),t.setLoggedInUser(Object(j.a)({},r.data)),localStorage.setItem("loggedInUser",JSON.stringify(Object(j.a)({},r.data))),m({password:"",email:""}),e.history.push("/book/all"),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(1),console.error(a.t0.response),m(Object(j.a)({},a.t0.response.data.errors));case 16:case"end":return a.stop()}}),a,null,[[1,12]])})))).apply(this,arguments)}return Object(n.jsxs)("form",{onSubmit:function(e){return x.apply(this,arguments)},children:[Object(n.jsx)("h1",{children:"Login"}),Object(n.jsx)(y,{type:"email",label:"E-mail Address",name:"email",id:"signupFormEmail",value:s.email,error:u.email,onChange:O}),Object(n.jsx)(y,{type:"password",label:"Password",name:"password",id:"signupFormPassword",value:s.password,error:u.password,onChange:O}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Login!"}),Object(n.jsx)(l.b,{to:"/auth/signup",children:"Don't have an account? Click here to signup!"})]})]})};var Q=function(e){return Object(n.jsx)(c.a.Fragment,{children:Object(n.jsx)("div",{className:"container-fluid",children:Object(n.jsxs)(i.d,{children:[Object(n.jsx)(i.b,{path:"".concat(e.match.path,"/signup"),component:M}),Object(n.jsx)(i.b,{path:"".concat(e.match.path,"/login"),component:z})]})})})};var X=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(l.b,{to:"/",children:"Back to homepage"}),Object(n.jsx)("div",{className:"d-flex vw-100 vh-100 justify-content-center align-items-center",children:Object(n.jsx)("img",{src:"https://i.pinimg.com/736x/64/55/2e/64552ea8642df46fc9581cff194d7037.jpg",alt:"page not found illustration"})})]})};var Z=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQd43o4s3SOqu7ilYRkGBj3AALSLnh0jOwrZg&usqp=CAU",alt:"internal server error"}),Object(n.jsx)("button",{className:"btn btn-warning",onClick:function(){return window.location.reload()},children:"Reload the page"})]})};var K=function(){return Object(n.jsx)(l.a,{children:Object(n.jsx)(L,{children:Object(n.jsxs)(i.d,{children:[Object(n.jsx)(i.b,{exact:!0,path:"/",component:b}),Object(n.jsx)(i.b,{path:"/book",component:H}),Object(n.jsx)(i.b,{path:"/auth",component:Q}),Object(n.jsx)(i.b,{path:"/internal-server-error",component:Z}),Object(n.jsx)(i.b,{path:"*",component:X})]})})})};o.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(K,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.9dd61882.chunk.js.map